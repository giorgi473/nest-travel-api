# [build]
# command = "npm run build"
# functions = "netlify/functions"
# publish = "dist"

# [functions]
# node_bundler = "esbuild"
# external_node_modules = [
#     "express",
#     "@nestjs/core",
#     "@nestjs/common",
#     "@nestjs/platform-express",
#     "typeorm",
# ]

# # âœ… CORS Headers
# [[headers]]
# for = "/*"
# [headers.values]
# Access-Control-Allow-Origin = "*"
# Access-Control-Allow-Methods = "GET, POST, PUT, DELETE, PATCH, OPTIONS"
# Access-Control-Allow-Headers = "Content-Type, Authorization"
# Access-Control-Allow-Credentials = "true"

# [[redirects]]
# from = "/*"
# to = "/.netlify/functions/api"
# status = 200
# force = true
[build]
command = "npm run build"
functions = "netlify/functions"
publish = "dist"

[functions]
node_bundler = "esbuild"
# âš ï¸ áƒ™áƒ áƒ˜áƒ¢áƒ˜áƒ™áƒ£áƒšáƒ˜ áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ 1: áƒáƒ›áƒáƒ¦áƒ”áƒ‘áƒ£áƒšáƒ˜áƒ external_node_modules.
# áƒ©áƒ•áƒ”áƒœ áƒ•áƒ”áƒœáƒ“áƒáƒ‘áƒ˜áƒ— esbuild-áƒ¡, áƒ áƒáƒ› áƒ©áƒáƒáƒ‘áƒáƒœáƒ“áƒšáƒáƒ¡ áƒ›áƒ®áƒáƒšáƒáƒ“ áƒ¡áƒáƒ­áƒ˜áƒ áƒ áƒ™áƒáƒ“áƒ˜.

# âš ï¸ áƒ™áƒ áƒ˜áƒ¢áƒ˜áƒ™áƒ£áƒšáƒ˜ áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ 2: áƒ•áƒ£áƒ—áƒ˜áƒ—áƒ”áƒ‘áƒ—, áƒ áƒáƒ› node_modules áƒ›áƒ—áƒšáƒ˜áƒáƒœáƒáƒ“ áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡ áƒ¨áƒ”áƒ¢áƒáƒœáƒ˜áƒšáƒ˜.
# áƒ”áƒ¡ áƒáƒ˜áƒ«áƒ£áƒšáƒ”áƒ‘áƒ¡ Netlify-áƒ¡, áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒ¡ áƒ›áƒ˜áƒáƒ¬áƒáƒ“áƒáƒ¡ áƒ˜áƒ¡ áƒ›áƒáƒ“áƒ£áƒšáƒ”áƒ‘áƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ—áƒáƒª esbuild áƒáƒ  áƒáƒ‘áƒáƒœáƒ“áƒšáƒ”áƒ‘áƒ¡.
# áƒ”áƒ¡ áƒ¨áƒ”áƒ˜áƒ«áƒšáƒ”áƒ‘áƒ áƒ˜áƒ§áƒáƒ¡ áƒ“áƒ˜áƒ“áƒ˜, áƒ›áƒáƒ’áƒ áƒáƒ› áƒ—áƒ£ NestJS-áƒ˜áƒ¡ build-áƒ˜ áƒ™áƒáƒ áƒ’áƒáƒ“ áƒáƒ áƒ˜áƒ¡ áƒáƒáƒ¢áƒ˜áƒ›áƒ˜áƒ–áƒ”áƒ‘áƒ£áƒšáƒ˜,
# áƒ”áƒ¡ áƒ›áƒ£áƒ¨áƒáƒáƒ‘áƒ¡. áƒ—áƒ£ áƒ›áƒáƒ˜áƒœáƒª áƒ¬áƒáƒ áƒ£áƒ›áƒáƒ¢áƒ”áƒ‘áƒšáƒáƒ“ áƒ“áƒáƒ¡áƒ áƒ£áƒšáƒ“áƒ, áƒ›áƒáƒ¨áƒ˜áƒœ:
# áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ•áƒªáƒ•áƒáƒšáƒáƒ— "node_modules/**" áƒ™áƒáƒœáƒ™áƒ áƒ”áƒ¢áƒ£áƒšáƒ˜ áƒ›áƒáƒ“áƒ£áƒšáƒ”áƒ‘áƒ˜áƒ—.
included_files = ["node_modules/**"]

# ğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒ’áƒ˜áƒ«áƒšáƒ˜áƒáƒ— áƒ¡áƒªáƒáƒ“áƒáƒ— node_bundler = "none" (áƒ’áƒáƒ›áƒáƒ áƒ—áƒ•áƒ), 
# áƒ—áƒ£ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ npm run build áƒ£áƒ™áƒ•áƒ” áƒáƒ™áƒ”áƒ—áƒ”áƒ‘áƒ¡ áƒ¡áƒ áƒ£áƒš áƒ‘áƒáƒœáƒ“áƒšáƒ˜áƒœáƒ’áƒ¡.

# CORS Headers (áƒ”áƒ¡ áƒœáƒáƒ¬áƒ˜áƒšáƒ˜ áƒ™áƒáƒ áƒ’áƒáƒ“ áƒ’áƒáƒ¥áƒ•áƒ—)
[[headers]]
for = "/*"
[headers.values]
Access-Control-Allow-Origin = "*"
Access-Control-Allow-Methods = "GET, POST, PUT, DELETE, PATCH, OPTIONS"
Access-Control-Allow-Headers = "Content-Type, Authorization"
Access-Control-Allow-Credentials = "true"

# Redirects (áƒ”áƒ¡ áƒœáƒáƒ¬áƒ˜áƒšáƒ˜ áƒ™áƒáƒ áƒ’áƒáƒ“ áƒ’áƒáƒ¥áƒ•áƒ—)
[[redirects]]
from = "/*"
to = "/.netlify/functions/api"
status = 200
force = true
